/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={842:()=>{},584:function(e,t){!function(e){"use strict";var t,n,r=function(){function e(t,n,r){this.href=e.create(t,n,r)}return e.getSanitizedQuery=function(e){return Object.keys(e).map((function(t){return[t,e[t]].map(encodeURIComponent).join("=")})).join("&")},e.create=function(t,n,r){return t+(n?"/"+encodeURI(n):"")+(r?"?"+e.getSanitizedQuery(r):"")},e}();(n=e.BioFactor||(e.BioFactor={}))[n.Multiple=1]="Multiple",n[n.FacialFeatures=2]="FacialFeatures",n[n.Voice=4]="Voice",n[n.Fingerprint=8]="Fingerprint",n[n.Iris=16]="Iris",n[n.Retina=32]="Retina",n[n.HandGeometry=64]="HandGeometry",n[n.SignatureDynamics=128]="SignatureDynamics",n[n.KeystrokeDynamics=256]="KeystrokeDynamics",n[n.LipMovement=512]="LipMovement",n[n.ThermalFaceImage=1024]="ThermalFaceImage",n[n.ThermalHandImage=2048]="ThermalHandImage",n[n.Gait=4096]="Gait",(t=e.BioSampleFormatOwner||(e.BioSampleFormatOwner={}))[t.None=0]="None",t[t.Neurotechnologija=49]="Neurotechnologija",t[t.DigitalPersona=51]="DigitalPersona",t[t.Cognitec=99]="Cognitec",t[t.Innovatrics=53]="Innovatrics";var o,i,a,s=function(e,t){this.FormatOwner=e,this.FormatID=t};(a=e.BioSampleType||(e.BioSampleType={}))[a.Raw=1]="Raw",a[a.Intermediate=2]="Intermediate",a[a.Processed=4]="Processed",a[a.RawWSQCompressed=8]="RawWSQCompressed",a[a.Encrypted=16]="Encrypted",a[a.Signed=32]="Signed",(i=e.BioSamplePurpose||(e.BioSamplePurpose={}))[i.Any=0]="Any",i[i.Verify=1]="Verify",i[i.Identify=2]="Identify",i[i.Enroll=3]="Enroll",i[i.EnrollForVerificationOnly=4]="EnrollForVerificationOnly",i[i.EnrollForIdentificationOnly=5]="EnrollForIdentificationOnly",i[i.Audit=6]="Audit",(o=e.BioSampleEncryption||(e.BioSampleEncryption={}))[o.None=0]="None",o[o.XTEA=1]="XTEA";var c=function(e,t,n,r,o,i){this.Factor=e,this.Format=t,this.Type=n,this.Purpose=r,this.Quality=o,this.Encryption=i},u=function(e,t){this.Header=e,this.Data=t,this.Version=1},f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)};function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var d,p=function(){function e(){}return e.fromUtf8=function(e){return decodeURIComponent(escape(h.noBom(e)))},e.fromBase64=function(t){return e.fromUtf8(h.fromBase64(t))},e.fromBase64Url=function(t){return e.fromUtf8(h.fromBase64Url(t))},e.withBom=function(e){return"\ufeff"+e},e.noBom=function(e){return e.replace(/^\uFEFF/,"")},e}(),h=function(){function e(){}return e.fromUtf16=function(e){return unescape(encodeURIComponent(p.noBom(e)))},e.fromBase64=function(e){return atob(e)},e.fromBase64Url=function(t){return e.fromBase64(m.fromBase64Url(t))},e.fromBytes=function(e){return String.fromCharCode.apply(String,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(e))},e.withBom=function(e){return"ï»¿"+e},e.noBom=function(e){return e.replace(/^\xEF\xBB\xBF/,"")},e}(),m=function(){function e(){}return e.fromUtf8=function(e){return btoa(e)},e.fromUtf16=function(t){return e.fromUtf8(h.fromUtf16(t))},e.fromBase64Url=function(e){return(e.length%4==2?e+"==":e.length%4==3?e+"=":e).replace(/-/g,"+").replace(/_/g,"/")},e.fromBytes=function(t){return e.fromUtf8(h.fromBytes(t))},e.fromJSON=function(t){return e.fromUtf16(JSON.stringify(t))},e}(),g=function(){function e(){}return e.fromBase64=function(e){return e.replace(/\=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.fromUtf8=function(t){return e.fromBase64(m.fromUtf8(t))},e.fromUtf16=function(t){return e.fromBase64(m.fromUtf16(t))},e.fromBytes=function(t){return e.fromUtf8(h.fromBytes(t))},e.fromJSON=function(t){return e.fromUtf16(JSON.stringify(t))},e}(),y=function(){function e(){}return e.fromBytes=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",n=0,r=0,o=0,i=0,a=0,s="",c=e.length,u=0,f=5*Math.floor(c/5);u<f;)n=e[u++],r=e[u++],o=e[u++],i=e[u++],a=e[u++],s+=t[n>>>3]+t[31&(n<<2|r>>>6)]+t[r>>>1&31]+t[31&(r<<4|o>>>4)]+t[31&(o<<1|i>>>7)]+t[i>>>2&31]+t[31&(i<<3|a>>>5)]+t[31&a];var l=c-f;if(0===l)return s;switch(l){case 4:i=e[--c];case 3:o=e[--c];case 2:r=e[--c];case 1:n=e[--c]}switch(s+=t[n>>>3],l){case 1:return s+t[n<<2&31]+"======";case 2:return s+t[31&(n<<2|r>>>6)]+t[r>>>1&31]+t[r<<4&31]+"====";case 3:return s+t[31&(n<<2|r>>>6)]+t[r>>>1&31]+t[31&(r<<4|o>>>4)]+t[o<<1&31]+"===";case 4:return s+t[31&(n<<2|r>>>6)]+t[r>>>1&31]+t[31&(r<<4|o>>>4)]+t[31&(o<<1|i>>>7)]+t[i>>>2&31]+t[i<<3&31]+"="}return s},e}();(d=e.UserNameType||(e.UserNameType={}))[d.Unknown=0]="Unknown",d[d.NetBIOSDomain=1]="NetBIOSDomain",d[d.DNSDomain=2]="DNSDomain",d[d.SAM=3]="SAM",d[d.Simple=4]="Simple",d[d.UID=5]="UID",d[d.UPN=6]="UPN",d[d.Display=7]="Display",d[d.SID=8]="SID",d[d.DP=9]="DP";var v,C=function(){function t(t,n){this.name=t||"",this.type=n||(0===this.name.length||"*"===this.name?e.UserNameType.Unknown:-1!==this.name.indexOf("@")?e.UserNameType.UPN:-1!==this.name.indexOf("\\")?e.UserNameType.SAM:/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(this.name)?e.UserNameType.UID:e.UserNameType.DP)}return t.prototype.isAnonymous=function(){return!this.name||0===this.name.length},t.prototype.isEveryone=function(){return"*"===this.name},t.Anonymous=function(){return new t("",e.UserNameType.Unknown)},t.Everyone=function(){return new t("*",e.UserNameType.Unknown)},t.fromJWT=function(n,r){var o=S.claims(n);return o.sub&&o.sub instanceof t?o.sub:o.wan?new t(o.wan,r):o.sub?new t(o.sub,r||e.UserNameType.DP):t.Anonymous()},t}(),D=function(e,t,n){this.typ=e,this.cty=n,this.alg=t},S=function(){function e(){}return e.claims=function(e){var t=e.split("."),n=JSON.parse(p.fromBase64Url(t[0]));if("JWT"===n.cty)return f(f({},n),new D);var r=JSON.parse(p.fromBase64Url(t[1]));if("object"==typeof r.sub){var o=r.sub,i=o.name,a=o.type;r.sub=new C(i,a)}return r},e.errors=function(t){var n=[],r=e.claims(t),o=(new Date).getTime()/1e3;return r.iat&&r.nbf&&r.iat>r.nbf&&n.push(new Error("JWT.Error.IssueTimeLaterThanNotBefore")),r.nbf&&r.nbf>o&&n.push(new Error("JWT.Error.NotEffectiveYet")),r.exp&&r.exp<=o&&n.push(new Error("JWT.Error.Expired")),n.length>0?n:null},e}();(v=e.ClaimName||(e.ClaimName={})).TokensId="jti",v.IssuerName="iss",v.IssuedAt="iat",v.Audience="aud",v.NotBefore="nbf",v.ExpiresAfter="exp",v.SubjectName="sub",v.IssuerDomain="dom",v.SubjectUid="uid",v.ADGuid="ad_guid",v.CredentialsUsed="crd",v.Group="group",v.Role="role",v.WindowsAccountName="wan",v.T24Principal="t24";var w,U=function(){function e(e){this.jwt=e}return e.None=function(){return new e("")},e}(),A=function(){function e(e,t,n){void 0===n&&(n=!0),this.id=e,this.data=t?n?g.fromUtf16("string"!=typeof t?JSON.stringify(t):t):JSON.stringify(t):null}return e.None=function(){return new e("")},e.Any=function(){return new e("*")},e.Password="D1A1F561-E14A-4699-9138-2EB523E132CC",e.Fingerprints="AC184A13-60AB-40E5-A514-E10F777EC2F9",e.Face="85AEAA44-413B-4DC1-AF09-ADE15892730A",e.SmartCard="D66CC98D-4153-4987-8EBE-FB46E848EA98",e.ContactlessCard="F674862D-AC70-48CA-B73E-64A22F3BAC44",e.ProximityCard="1F31360C-81C0-4EE0-9ACD-5A4400F66CC2",e.PIN="8A6FCEC3-3C8A-40C2-8AC0-A039EC01BA05",e.SecurityQuestions="B49E99C6-6C94-42DE-ACD7-FD6B415DF503",e.Bluetooth="E750A180-577B-47F7-ACD9-F89A7E27FA49",e.OneTimePassword="324C38BD-0B51-4E4D-BD75-200DA0C8177F",e.U2F="5D5F73AF-BCE5-4161-9584-42A61AED0E48",e.IWA="AE922666-9667-49BC-97DA-1EB0E1EF73D2",e.Email="7845D71D-AB67-4EA7-913C-F81E75C3A087",e.Behavior="193C41F6-5CF6-4525-84CC-223603DAC9AB",e.Cards="FCFA704C-144B-42DB-8DF3-13F5CD20C525",e}();(w=e.FingerPosition||(e.FingerPosition={}))[w.Unknown=0]="Unknown",w[w.RightThumb=1]="RightThumb",w[w.RightIndex=2]="RightIndex",w[w.RightMiddle=3]="RightMiddle",w[w.RightRing=4]="RightRing",w[w.RightLittle=5]="RightLittle",w[w.LeftThumb=6]="LeftThumb",w[w.LeftIndex=7]="LeftIndex",w[w.LeftMiddle=8]="LeftMiddle",w[w.LeftRing=9]="LeftRing",w[w.LeftLittle=10]="LeftLittle";var B,F=function(){function e(e){this.position=e}return e.fromJson=function(t){return new e(t.position)},e}();(B=e.FaceImageType||(e.FaceImageType={}))[B.Jpeg=1]="Jpeg";var E,I=function(){function t(t,n){void 0===n&&(n=e.FaceImageType.Jpeg),this.ImageData=t,this.ImageType=n,this.Version=1}return t.fromDataURL=function(e){return new t(e.replace("data:image/jpeg;base64,",""))},t.fromCanvas=function(e,n){return void 0===n&&(n=1),t.fromDataURL(e.toDataURL("image/jpeg",n))},t.prototype.toBioSample=function(t,n,r){return void 0===t&&(t=new s(e.BioSampleFormatOwner.None,0)),void 0===n&&(n=e.BioSamplePurpose.Any),new u(new c(e.BioFactor.FacialFeatures,t,e.BioSampleType.Raw,n,-1,e.BioSampleEncryption.None),g.fromJSON(this))},t}();(E=e.QuestionType||(e.QuestionType={}))[E.Regular=0]="Regular",E[E.Custom=1]="Custom";var T=function(){function t(t,n,r,o,i){if(this.number=t,this.lang_id=n,this.sublang_id=r,this.keyboard_layout=o,this.text=i,this.version=1,this.type=t<=100?e.QuestionType.Regular:e.QuestionType.Custom,this.type===e.QuestionType.Custom&&!i)throw new Error("Question text is required for custom questions")}return t.fromJson=function(e){var n=e;return new t(n.number,n.lang_id,n.sublang_id,n.keyboard_layout,n.text)},t}(),N=function(e,t){this.text=t,this.number=e instanceof T?e.number:e};e.Answer=N,e.Base32=y,e.Base64=m,e.Base64Url=g,e.BioSample=u,e.BioSampleFormat=s,e.BioSampleHeader=c,e.Credential=A,e.FaceImage=I,e.Finger=F,e.JWT=S,e.Question=T,e.Ticket=U,e.Url=r,e.User=C,e.Utf16=p,e.Utf8=h,Object.defineProperty(e,"__esModule",{value:!0})}(t)},218:function(e,t,n){!function(e,t){"use strict";var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},n(e,t)};function r(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o,i,a=function(e){this.type=e},s=function(e){function t(){return e.call(this,"CommunicationFailed")||this}return r(t,e),t}(a),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.deviceId=n,r}return r(t,e),t}(a),u=function(e){function t(t){return e.call(this,"DeviceConnected",t)||this}return r(t,e),t}(c),f=function(e){function t(t){return e.call(this,"DeviceDisconnected",t)||this}return r(t,e),t}(c);(i=e.CardType||(e.CardType={}))[i.Contact=1]="Contact",i[i.Contactless=2]="Contactless",i[i.Proximity=4]="Proximity",(o=e.CardAttributes||(e.CardAttributes={}))[o.SupportsPIN=1]="SupportsPIN",o[o.SupportsUID=2]="SupportsUID",o[o.IsPKI=65536]="IsPKI",o[o.IsPIV=131072]="IsPIV",o[o.IsReadOnly=2147483648]="IsReadOnly";var l,d=function(e){function t(t,n){var r=e.call(this,"CardInserted",t)||this;return r.cardId=n,r}return r(t,e),t}(c),p=function(e){function t(t,n){var r=e.call(this,"CardRemoved",t)||this;return r.cardId=n,r}return r(t,e),t}(c),h=function(){function e(){this.handlers={}}return e.prototype._on=function(e,t){return this.handlers[e]=this.handlers[e]||[],this.handlers[e].push(t),t},e.prototype._off=function(e,t){if(e){var n=this.handlers[e];n&&(t?this.handlers[e]=n.filter((function(e){return e!==t})):delete this.handlers[e])}else this.handlers={};return this},e.prototype.emit=function(e){var t=this;if(e){var n=e.type,r=this["on"+n];r&&this.invoke(r,e);var o=this.handlers[n];o&&o.forEach((function(n){return t.invoke(n,e)}))}},e.prototype.invoke=function(e,t){try{e(t)}catch(e){console.error(e)}},e}();!function(e){e[e.Response=0]="Response",e[e.Notification=1]="Notification"}(l||(l={}));var m,g,y=function(){function e(e,t){this.pending=[],this.webChannel=new WebSdk.WebChannelClient(e,t),this.webChannel.onConnectionSucceed=this.onConnectionSucceed.bind(this),this.webChannel.onConnectionFailed=this.onConnectionFailed.bind(this),this.webChannel.onDataReceivedTxt=this.onDataReceivedTxt.bind(this)}return e.prototype.send=function(e,t){var n=new Promise((function(n,r){e.resolve=n,e.reject=r,t&&(e.timer=window.setTimeout((function(){if(e.timer)try{e.reject(new Error("Timeout"))}catch(e){}}),t))}));return this.pending.push(e),this.webChannel.isConnected()?this.processRequestQueue():this.webChannel.connect(),n},e.prototype.onConnectionSucceed=function(){this.processRequestQueue()},e.prototype.onConnectionFailed=function(){if(this.pending.forEach((function(e){return e.reject(new Error("Communication failure."))})),this.pending=[],this.onCommunicationError)try{this.onCommunicationError()}catch(e){}},e.prototype.onDataReceivedTxt=function(e){var n=JSON.parse(t.Utf8.fromBase64Url(e));if(n.Type===l.Response){var r=JSON.parse(t.Utf8.fromBase64Url(n.Data||"")),o=this.findRequest(r);if(null!==o){o.timer&&(window.clearTimeout(o.timer),delete o.timer);var i=r.Result>>>0;i>2147483647?o.reject(new Error("0x"+i.toString(16))):o.resolve(r)}else console.log("Orphaned response: "+n.Type)}else if(n.Type===l.Notification){var a=JSON.parse(t.Utf8.fromBase64Url(n.Data||""));if(this.onNotification)try{this.onNotification(a)}catch(e){}}else console.log("Unknown message type: "+n.Type)},e.prototype.processRequestQueue=function(){var e=this;this.pending.forEach((function(n,r,o){n.sent||(e.webChannel.sendDataTxt(t.Base64Url.fromJSON(n.command)),o[r].sent=!0)}))},e.prototype.findRequest=function(e){for(var t=0;t<this.pending.length;t++){var n=this.pending[t];if(n.sent&&n.command.Method===e.Method)return this.pending.splice(t,1),n}return null},e}(),v=function(e,t){this.Method=e,this.Parameters=t},C=function(e){this.command=e,this.sent=!1};(function(e){e[e.EnumerateReaders=1]="EnumerateReaders",e[e.EnumerateCards=2]="EnumerateCards",e[e.GetCardInfo=3]="GetCardInfo",e[e.GetCardUID=4]="GetCardUID",e[e.GetDPCardAuthData=5]="GetDPCardAuthData",e[e.GetDPCardEnrollData=6]="GetDPCardEnrollData",e[e.Subscribe=100]="Subscribe",e[e.Unsubscribe=101]="Unsubscribe"})(m||(m={})),function(e){e[e.ReaderConnected=1]="ReaderConnected",e[e.ReaderDisconnected=2]="ReaderDisconnected",e[e.CardInserted=3]="CardInserted",e[e.CardRemoved=4]="CardRemoved"}(g||(g={}));var D,S,w,U,A,B=function(e){function n(t){var n=e.call(this)||this;return n.channel=new y("smartcards",t),n.channel.onCommunicationError=n.onConnectionFailed.bind(n),n.channel.onNotification=n.processNotification.bind(n),n}return r(n,e),n.prototype.on=function(e,t){return this._on(e,t)},n.prototype.off=function(e,t){return this._off(e,t)},n.prototype.enumerateReaders=function(){return this.channel.send(new C(new v(m.EnumerateReaders))).then((function(e){var n=JSON.parse(t.Utf8.fromBase64Url(e.Data||"{}"));return JSON.parse(n.Readers||"[]")}))},n.prototype.enumerateCards=function(){return this.channel.send(new C(new v(m.EnumerateCards))).then((function(e){var n=JSON.parse(t.Utf8.fromBase64Url(e.Data||"{}"));return JSON.parse(n.Cards||"[]").map((function(e){return JSON.parse(t.Utf16.fromBase64Url(e))}))}))},n.prototype.getCardInfo=function(e){return this.channel.send(new C(new v(m.GetCardInfo,t.Base64Url.fromJSON({Reader:e})))).then((function(e){return JSON.parse(t.Utf8.fromBase64Url(e.Data||"null"))}))},n.prototype.getCardUid=function(e){return this.channel.send(new C(new v(m.GetCardUID,t.Base64Url.fromJSON({Reader:e})))).then((function(e){return t.Base64.fromBase64Url(e.Data||"")}))},n.prototype.getCardAuthData=function(e,n){return this.channel.send(new C(new v(m.GetDPCardAuthData,t.Base64Url.fromJSON({Reader:e,PIN:n||""})))).then((function(e){return JSON.parse(t.Utf8.fromBase64Url(e.Data||""))}))},n.prototype.getCardEnrollData=function(e,n){return this.channel.send(new C(new v(m.GetDPCardEnrollData,t.Base64Url.fromJSON({Reader:e,PIN:n||""})))).then((function(e){return JSON.parse(t.Utf8.fromBase64Url(e.Data||""))}))},n.prototype.subscribe=function(e){return this.channel.send(new C(new v(m.Subscribe,e?t.Base64Url.fromJSON({Reader:e}):""))).then()},n.prototype.unsubscribe=function(e){return this.channel.send(new C(new v(m.Unsubscribe,e?t.Base64Url.fromJSON({Reader:e}):""))).then()},n.prototype.onConnectionFailed=function(){this.emit(new s)},n.prototype.processNotification=function(e){switch(e.Event){case g.ReaderConnected:return this.emit(new u(e.Reader));case g.ReaderDisconnected:return this.emit(new f(e.Reader));case g.CardInserted:return this.emit(new d(e.Reader,e.Card));case g.CardRemoved:return this.emit(new p(e.Reader,e.Card));default:console.log("Unknown notification: "+e.Event)}},n}(h);(A=e.DeviceUidType||(e.DeviceUidType={}))[A.Persistent=0]="Persistent",A[A.Volatile=1]="Volatile",(U=e.DeviceModality||(e.DeviceModality={}))[U.Unknown=0]="Unknown",U[U.Swipe=1]="Swipe",U[U.Area=2]="Area",U[U.AreaMultifinger=3]="AreaMultifinger",(w=e.DeviceTechnology||(e.DeviceTechnology={}))[w.Unknown=0]="Unknown",w[w.Optical=1]="Optical",w[w.Capacitive=2]="Capacitive",w[w.Thermal=3]="Thermal",w[w.Pressure=4]="Pressure",(S=e.SampleFormat||(e.SampleFormat={}))[S.Raw=1]="Raw",S[S.Intermediate=2]="Intermediate",S[S.Compressed=3]="Compressed",S[S.PngImage=5]="PngImage",(D=e.QualityCode||(e.QualityCode={}))[D.Good=0]="Good",D[D.NoImage=1]="NoImage",D[D.TooLight=2]="TooLight",D[D.TooDark=3]="TooDark",D[D.TooNoisy=4]="TooNoisy",D[D.LowContrast=5]="LowContrast",D[D.NotEnoughFeatures=6]="NotEnoughFeatures",D[D.NotCentered=7]="NotCentered",D[D.NotAFinger=8]="NotAFinger",D[D.TooHigh=9]="TooHigh",D[D.TooLow=10]="TooLow",D[D.TooLeft=11]="TooLeft",D[D.TooRight=12]="TooRight",D[D.TooStrange=13]="TooStrange",D[D.TooFast=14]="TooFast",D[D.TooSkewed=15]="TooSkewed",D[D.TooShort=16]="TooShort",D[D.TooSlow=17]="TooSlow",D[D.ReverseMotion=18]="ReverseMotion",D[D.PressureTooHard=19]="PressureTooHard",D[D.PressureTooLight=20]="PressureTooLight",D[D.WetFinger=21]="WetFinger",D[D.FakeFinger=22]="FakeFinger",D[D.TooSmall=23]="TooSmall",D[D.RotatedTooMuch=24]="RotatedTooMuch";var F,E,I=function(e){function t(t,n,r){var o=e.call(this,"SamplesAcquired",t)||this;return o.sampleFormat=n,o.samples=JSON.parse(r),o}return r(t,e),t}(c),T=function(e){function t(t,n){var r=e.call(this,"QualityReported",t)||this;return r.quality=n,r}return r(t,e),t}(c),N=function(e){function t(t,n){var r=e.call(this,"ErrorOccurred",t)||this;return r.error=n,r}return r(t,e),t}(c),R=function(e){function t(t){return e.call(this,"AcquisitionStarted",t)||this}return r(t,e),t}(c),O=function(e){function t(t){return e.call(this,"AcquisitionStopped",t)||this}return r(t,e),t}(c);(function(e){e[e.EnumerateDevices=1]="EnumerateDevices",e[e.GetDeviceInfo=2]="GetDeviceInfo",e[e.StartAcquisition=3]="StartAcquisition",e[e.StopAcquisition=4]="StopAcquisition"})(F||(F={})),function(e){e[e.Completed=0]="Completed",e[e.Error=1]="Error",e[e.Disconnected=2]="Disconnected",e[e.Connected=3]="Connected",e[e.Quality=4]="Quality",e[e.Stopped=10]="Stopped",e[e.Started=11]="Started"}(E||(E={}));var b,P,_=function(e){function n(t){var n=e.call(this)||this;return n.options=t,n.channel=new y("fingerprints",n.options),n.channel.onCommunicationError=n.onConnectionFailed.bind(n),n.channel.onNotification=n.processNotification.bind(n),n}return r(n,e),n.prototype.on=function(e,t){return this._on(e,t)},n.prototype.off=function(e,t){return this._off(e,t)},n.prototype.enumerateDevices=function(){return this.channel.send(new C(new v(F.EnumerateDevices))).then((function(e){if(!e)return[];var n=JSON.parse(t.Utf8.fromBase64Url(e.Data||"{}"));return JSON.parse(n.DeviceIDs||"[]")}))},n.prototype.getDeviceInfo=function(e){return this.channel.send(new C(new v(F.GetDeviceInfo,t.Base64Url.fromJSON({DeviceID:e})))).then((function(e){return JSON.parse(t.Utf8.fromBase64Url(e.Data||"null"))}))},n.prototype.startAcquisition=function(e,n){return this.channel.send(new C(new v(F.StartAcquisition,t.Base64Url.fromJSON({DeviceID:n||"00000000-0000-0000-0000-000000000000",SampleType:e})))).then()},n.prototype.stopAcquisition=function(e){return this.channel.send(new C(new v(F.StopAcquisition,t.Base64Url.fromJSON({DeviceID:e||"00000000-0000-0000-0000-000000000000"})))).then()},n.prototype.onConnectionFailed=function(){this.emit(new s)},n.prototype.processNotification=function(e){switch(e.Event){case E.Completed:var n=JSON.parse(t.Utf8.fromBase64Url(e.Data||""));return this.emit(new I(e.Device,n.SampleFormat,n.Samples));case E.Error:var r=JSON.parse(t.Utf8.fromBase64Url(e.Data||""));return this.emit(new N(e.Device,r.uError));case E.Disconnected:return this.emit(new f(e.Device));case E.Connected:return this.emit(new u(e.Device));case E.Quality:var o=JSON.parse(t.Utf8.fromBase64Url(e.Data||""));return this.emit(new T(e.Device,o.Quality));case E.Stopped:return this.emit(new O(e.Device));case E.Started:return this.emit(new R(e.Device));default:console.log("Unknown notification: "+e.Event)}},n}(h);(function(e){e[e.Init=1]="Init",e[e.Continue=2]="Continue",e[e.Term=3]="Term",e[e.Authenticate=4]="Authenticate"})(b||(b={})),function(e){e[e.Response=0]="Response",e[e.Notification=1]="Notification"}(P||(P={}));var J=function(e){function t(t){var n=e.call(this)||this;return n.channel=new y("wia",t),n.channel.onCommunicationError=n.onConnectionFailed.bind(n),n}return r(t,e),t.prototype.on=function(e,t){return this._on(e,t)},t.prototype.off=function(e,t){return this._off(e,t)},t.prototype.init=function(){return this.channel.send(new C(new v(b.Init)),3e3).then((function(e){var t=JSON.parse(e.Data||"{}");return{handle:t.Handle,data:t.Data}}))},t.prototype.continue=function(e,t){return this.channel.send(new C(new v(b.Continue,JSON.stringify({Handle:e,Data:t})))).then((function(e){return JSON.parse(e.Data||"{}").Data}))},t.prototype.term=function(e){return this.channel.send(new C(new v(b.Term,JSON.stringify({Handle:e})))).then()},t.prototype.onConnectionFailed=function(){this.emit(new s)},t}(h);e.AcquisitionStarted=R,e.AcquisitionStopped=O,e.CardInserted=d,e.CardRemoved=p,e.CardsReader=B,e.CommunicationFailed=s,e.DeviceConnected=u,e.DeviceDisconnected=f,e.DeviceEvent=c,e.ErrorOccurred=N,e.Event=a,e.FingerprintReader=_,e.QualityReported=T,e.SamplesAcquired=I,e.WindowsAuthClient=J,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(584),n(449))},519:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),n(842);const o=n(218),i=n(584);function a(e){throw new Error(null==e?void 0:e.message)}class s{constructor(){this.fingerPrint="",this.acquisitionStarted=!1,this.onDeviceConnected=e=>{console.log("connected",e)},this.onAcquisitionStopped=e=>{console.log("connection stopped",e),this.acquisitionStarted=!1},this.onAcquisitionStarted=e=>{this.acquisitionStarted=!0},this.onDeviceDisconnected=e=>{console.log("disconnected")},this.onQualityReported=e=>{console.log("object")},this.onSamplesAcquired=e=>{$("#verifyloader").removeClass("visually-hidden");try{const t=null==e?void 0:e.samples;if(!t)return;const n=t[0],r=`data:image/png;base64, ${i.Base64.fromBase64Url(n)}`;this.fingerPrint=r;const o=new FormData;""!=this.fingerPrint?(o.append("fingerprint",this.fingerPrint),$.ajax({url:"/verify",data:o,type:"POST",processData:!1,contentType:!1,success:function(e){$("#verifyloader").addClass("visually-hidden"),e.success?(alert(`Access Granted, Welcome ${e.user.name}`),$("#fingerprintModal").modal("hide"),$("#doorOpen1").addClass("doorOpen1"),$("#doorOpen2").addClass("doorOpen2")):alert("Access Denied, User not found \nPlease clean or try a different finger ")},error:function(e){console.log(e),alert("Error")}})):alert("Please place index finger on scanner")}catch(e){a(e)}},this.onReaderError=e=>{console.log(e,"error")},this.reader=new o.FingerprintReader,this.reader.on("DeviceConnected",this.onDeviceConnected),this.reader.on("DeviceDisconnected",this.onDeviceDisconnected),this.reader.on("QualityReported",this.onQualityReported),this.reader.on("SamplesAcquired",this.onSamplesAcquired),this.reader.on("ErrorOccurred",this.onReaderError),this.reader.on("AcquisitionStopped",this.onAcquisitionStopped),this.reader.on("AcquisitionStarted",this.onAcquisitionStarted)}captureFingerprint(){return r(this,void 0,void 0,(function*(){try{yield this.reader.startAcquisition(o.SampleFormat.PngImage)}catch(e){a(e)}}))}destroy(){this.reader&&(this.reader.stopAcquisition(),this.reader.off(),delete this.reader)}}const c=$("#user_id").val();let u=new class{constructor(e){this.acquisitionStarted=!1,this.onDeviceConnected=e=>{console.log("connected",e)},this.onAcquisitionStopped=e=>{console.log("connection stopped",e),this.acquisitionStarted=!1},this.onAcquisitionStarted=e=>{this.acquisitionStarted=!0},this.onDeviceDisconnected=e=>{console.log("disconnected")},this.onQualityReported=e=>{console.log("object")},this.onSamplesAcquired=e=>{try{const t=null==e?void 0:e.samples;if(!t)return;const n=t[0],r=`data:image/png;base64, ${i.Base64.fromBase64Url(n)}`;"index_left_finger"==this.finger?(this.leftImage=r,$("#index_left_finger").html('<span class="icon icon-indexfinger-not-enrolled" title="not_enrolled"></span>'),$("#leftImage").attr("src",r)):(this.rightImage=r,$("#index_right_finger").html('<span class="icon icon-indexfinger-not-enrolled" title="not_enrolled"></span>'),$("#rightImage").attr("src",r)),console.log(r)}catch(e){a(e)}},this.onReaderError=e=>{console.log(e,"error")},this.init(e),this.leftImage="",this.rightImage=""}init(e){return r(this,void 0,void 0,(function*(){this.reader=new o.FingerprintReader,this.user=e,this.reader.on("DeviceConnected",this.onDeviceConnected),this.reader.on("DeviceDisconnected",this.onDeviceDisconnected),this.reader.on("QualityReported",this.onQualityReported),this.reader.on("SamplesAcquired",this.onSamplesAcquired),this.reader.on("ErrorOccurred",this.onReaderError),this.reader.on("AcquisitionStopped",this.onAcquisitionStopped),this.reader.on("AcquisitionStarted",this.onAcquisitionStarted)}))}captureFingerprint(){return r(this,void 0,void 0,(function*(){try{yield this.reader.startAcquisition(o.SampleFormat.PngImage)}catch(e){a(e),console.log(e)}}))}displayReader(){return r(this,void 0,void 0,(function*(){let e=yield this.reader.enumerateDevices();console.log(e),e.length>0||alert("please connect fingerprint reader")}))}destroy(){this.reader&&(this.reader.stopAcquisition(),this.reader.off(),delete this.reader)}}(null==c?void 0:c.toString());$("#captureRightButton").on("click",(function(){u.finger="index_right_finger",$("#index_right_finger").html('<span class="icon capture-indexfinger" title="not_enrolled"></span>'),null!=u.finger&&u.captureFingerprint()})),$("#captureLeftButton").on("click",(function(){u.finger="index_left_finger",$("#index_left_finger").html('<span class="icon capture-indexfinger" title="not_enrolled"></span>'),null!=u.finger&&u.captureFingerprint()})),$("#clearButton").on("click",(function(){$("#leftImage").attr("src","/static/finger.jpeg"),$("#rightImage").attr("src","/static/finger.jpeg"),u.rightImage="",u.leftImage="",u.finger=""})),$("#submitButton").on("click",(function(){const e=new FormData;""!=u.leftImage&&""!=u.rightImage?(e.append("left_finger",u.leftImage),e.append("right_finger",u.rightImage),e.append("user_id",u.user),$.ajax({url:"/fingerprint",data:e,type:"POST",processData:!1,contentType:!1,success:function(e){alert("Enrollment Successful"),u.destroy(),window.location.href="/"},error:function(e){alert("Error")}})):alert("Please enroll both fingers")})),$("#fingerprintModal").on("show.bs.modal",(function(e){return r(this,void 0,void 0,(function*(){const e=new s;$("#doorOpen1").removeClass("doorOpen1"),$("#doorOpen2").removeClass("doorOpen2"),yield e.captureFingerprint()}))}))},449:e=>{"use strict";e.exports=void 0}},t={};!function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(519)})();